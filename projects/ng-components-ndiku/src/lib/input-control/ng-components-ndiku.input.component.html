<form
  [formGroup]="componentFormGroup"
  *ngIf="buildInputControl$ | async as buildInputControl"
>
  <mat-form-field>
    <mat-label *ngIf="buildInputControl.inputLabel">{{
      buildInputControl.inputLabel
    }}</mat-label>
    <input
      matInput
      [type]="buildInputControl.inputType"
      [id]="buildInputControl.inputId"
      [placeholder]="buildInputControl.inputPlaceholder"
      formControlName="input"
      [errorStateMatcher]="matcher"
    />

    <mat-error
      *ngIf="
        buildInputControl.inputType === 'email' &&
        required &&
        componentFormGroup.controls.input.hasError('required')
      "
    >
      email field is required.
    </mat-error>
    <mat-error
      *ngIf="
        buildInputControl.inputType === 'email' &&
        required &&
        !componentFormGroup.controls.input.hasError('required') &&
        !componentFormGroup.controls.input.valid
      "
    >
      Please enter valid email.
    </mat-error>
    <mat-error
      *ngIf="
        buildInputControl.inputType === 'email' &&
        !required &&
        !componentFormGroup.controls.input.valid
      "
    >
      Please enter valid email.
    </mat-error>

    <mat-error
      *ngIf="
        buildInputControl.inputType === 'password' &&
        required &&
        componentFormGroup.controls.input.hasError('required')
      "
    >
      password field is required.
    </mat-error>

    <mat-error
      *ngIf="
        buildInputControl.inputType !== 'email' &&
        buildInputControl.inputType !== 'password' &&
        required &&
        componentFormGroup.controls.input.hasError('required')
      "
    >
      Please enter valid input.
    </mat-error>
  </mat-form-field>
</form>
